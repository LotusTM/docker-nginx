index index.php;

location / {
  try_files $uri $uri/ /index.php;
}

location ~ \.php$ {
  # prevents arbitrary code execution but ONLY if php files are stored on the same server
  try_files $uri =404;

  # NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini
  fastcgi_split_path_info ^(.+\.php)(/.+)$;

  # should point to php-fpm host or sock file
  fastcgi_pass unix:/run/php/php7.1-fpm.sock;

  include /etc/nginx/fastcgi_params;
}